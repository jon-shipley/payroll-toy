erDiagram
    Employees ||--o{ EmployeePositions : has
    Employees ||--o{ EmployeePersonalDetails : has
    Employees ||--o{ EmployeePensionEnrollments : has
    Employees ||--o{ PayrollRecords : has

    Departments ||--o{ EmployeePositions : has

    Positions ||--o{ EmployeePositions : has

    EmployeePositions ||--o{ TimeEntries : has
    EmployeePositions ||--o{ PayrollDetails : has

    PayPeriods ||--o{ TimeEntries : contains
    PayPeriods ||--o{ PayrollRecords : has

    PensionProviders ||--o{ PensionPlans : offers

    PensionPlans ||--o{ EmployeePensionEnrollments : has

    PayrollRecords ||--o{ PayrollDetails : contains
    PayrollRecords ||--o{ PensionContributions : has

    EmployeePensionEnrollments ||--o{ PensionContributions : generates

    Employees {
        SERIAL employee_id PK
        VARCHAR first_name
        VARCHAR last_name
        VARCHAR email
        DATE hire_date
        VARCHAR tax_id
    }

    Departments {
        SERIAL department_id PK
        VARCHAR department_name
        VARCHAR cost_center
    }

    Positions {
        SERIAL position_id PK
        VARCHAR title
        VARCHAR pay_grade
        BOOLEAN is_exempt
    }

    EmployeePositions {
        SERIAL employee_position_id PK
        INTEGER employee_id FK
        INTEGER position_id FK
        INTEGER department_id FK
        INTEGER manager_id FK
        BOOLEAN is_primary_position
        NUMERIC hourly_rate
        NUMERIC annual_salary
    }

    PayPeriods {
        SERIAL pay_period_id PK
        DATE start_date
        DATE end_date
        DATE pay_date
        VARCHAR period_type
    }

    TimeEntries {
        SERIAL time_entry_id PK
        INTEGER employee_position_id FK
        INTEGER pay_period_id FK
        DATE work_date
        NUMERIC hours_worked
        NUMERIC overtime_hours
    }

    PensionProviders {
        SERIAL provider_id PK
        VARCHAR provider_name
        VARCHAR provider_code
    }

    PensionPlans {
        SERIAL plan_id PK
        INTEGER provider_id FK
        VARCHAR plan_name
        NUMERIC employer_match_percentage
    }

    EmployeePensionEnrollments {
        SERIAL enrollment_id PK
        INTEGER employee_id FK
        INTEGER plan_id FK
        NUMERIC employee_contribution_percentage
        DATE enrollment_date
    }

    PayrollRecords {
        SERIAL payroll_record_id PK
        INTEGER employee_id FK
        INTEGER pay_period_id FK
        NUMERIC gross_pay
        NUMERIC net_pay
    }

    PayrollDetails {
        SERIAL payroll_detail_id PK
        INTEGER payroll_record_id FK
        INTEGER employee_position_id FK
        VARCHAR earning_type
        NUMERIC amount
    }

    PensionContributions {
        SERIAL contribution_id PK
        INTEGER enrollment_id FK
        INTEGER payroll_record_id FK
        NUMERIC employee_contribution
        NUMERIC employer_contribution
    }

    EmployeePersonalDetails {
        SERIAL personal_details_id PK
        INTEGER employee_id FK
        DATE date_of_birth
        VARCHAR address_line1
        VARCHAR city
    }
